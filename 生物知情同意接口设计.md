# 一、错误码

0	  请求完成

-1	  未知错误

1000	资源不存在（未找到URI对应的资源）

1001	请求参数校验失败

1002	所操作的数据不存在（一般是id错误）

1101	用户名重复

1102	用户名不存在

1103	密码错误

1200	没有权限

1300	上传文件格式错误

1301	上传文件内容错误

2000	未知数据库错误

# 二、权限

“authorities”: {“user”,"unit","admin"}

# 三、所需字段

1  指纹

2  面部

# 四、接口

## 1)、用户

### 1.用户注册接口

```javascript
/api/user/register
POST
application/json
返回示例
{
    "ecode":"0"
}
```

参数：

参数名    必选    类型    说明

username  yes    string   手机号

password  yes    string   密码

### 2.用户登陆接口

```javascript
/api/user/login
POST
application/json
返回示例
{
    "ecode":"0"
}
```

参数：

参数名    必选    类型    说明

username  yes    string   手机号

password  yes    string   密码

### 3.设置手势密码

```javascript
/api/user/setSign
POST
application/json
返回示例
{
    "ecode":"0"
}
```

参数：

参数名    必选    类型    说明

username  yes    string   手机号

password  yes    string   密码

### 4.1找回手势密码（发验证码）

```javascript
/api/user/findsign
POST
application/json
返回示例
{
    "ecode":"0"发送了验证码给手机
}
```



| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |



### 4.2 找回手势密码（修改密码）

```javascript
/api/user/changeSign

POST

application/json
```

参数：

参数名    必选    类型    说明

username  yes    string   手机号

password  yes    ?     密码

code    yes    string   短信验证码

返回示例

```javas
{

  "ecode":"0"

}
```

### 5.1获取所有项目

```
/api/getProject

POST

application/json
```

参数：

参数名    必选    类型    说明

method   yes    string   hot/time(按时间还是热度)

number   yes    int    从第几条返回(一次返回十条)

返回示例：

```javascript
{

  "ecode": "0",

  "content": [

​    {

​      "pid": "1", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    },

​    {

​      "pid": "2", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    }...（共十条）

  ]

}

 
```

### 5.2获取具体项目信息

```
/api/getProjectDetail

POST

application/json
```

参数：

参数名    必选    类型    说明

pid     yes    int    项目id

 

返回示例：

 

```
{

  "ecode": "0",

  "content": [

​    {

​      "pid": "1", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"，

​      "organization":"xxx单位",

​      "schedule":"2018.2.2-2019.2.21",

​      "data":[{"1"},{"2"}]//数字分别代表所需数据字段

​    },

  ]

}

 
```

### 6.提交同意

```
/api/user/postAgreement

POST

application/json
```

参数：

参数名    必选    类型                                      

data    yes  

  {"data":[{"dataId":"1","response":"yes"{"dataId":"3","response":"no"}]}*    

*username  yes    string*

*pid     yes    string  //项目id*

*signature  yes    ?* 

返回示例：

```
 

{

  "ecode": "0",

  

}

 
```

### 7.保存同意

```
/api/user/saveAgreement

POST

application/json
```

参数：

参数名    必选    示例                                      

data    yes    {"data":[{"dataId":"1","response":"yes"},{"dataId":"3","response":"no"}]}    

username  yes

pid     yes //项目id

返回示例：

 

```


{

  "ecode": "0",

  

}
```

 

### 8.获取已经保存同意

```
/api/user/getSavedAgreement

POST

application/json
```

参数：

参数名    必选                                         

username  yes

pid     yes //项目id

返回示例：

 

```
{

  "ecode": "0",

  "data":[{"dataId":"1","response":"yes"},{"dataId":"3","response":"no"}]  

  

}
```

 

### 9.获取已经完成存同意

```
/api/user/getCompletedAgreement

POST

application/json
```

参数：

参数名    必选                                         

username  yes

pid     yes //项目id

返回示例：

 

```
{

  "ecode": "0",

  "data":[{"dataId":"1","response":"yes"},{"dataId":"3","response":"no"}]  

  
```

}

### 10.修改同意(<!--参数问题-->)

```
/api/user/reviseAgreement

POST

application/json
```

参数：

参数名    必选    示例                                      

> ```
> data    yes    {"data":[{"dataId":"1","response":"yes"},{"dataId":"3","response":"no"}]}    
> 
> username  yes
> 
> pid     yes //项目id
> 
> signature  yes    ? 
> ```

返回示例：

```
{

  "ecode": "0",

  

}
```

 

### 11.核对手势密码<!--参数问题-->

```
/api/user/postSign

POST

application/json
```

参数：

参数名    必选    类型    说明

username  yes    string   手机号

password  yes    ?     密码

 

返回示例

```
{

  "ecode":"0"

}
```

 

### 12.获取用户收藏或完成的所有项目

```
/api/user/getUserProject

POST

application/json
```

参数：

参数名    必选    类型    说明

method   yes    string   collected/completed/saved(收藏/完成/保存)

username  yes    string

number   yes    int    从第几条返回(一次返回十条)

返回示例：

```javascript
{

  "ecode": "0",

  "content": [

​    {

​      "pid": "1", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    },

​    {

​      "pid": "2", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    }...（共十条）

  ]

}
```

 

### 13.用户收藏项目

```
/api/user/collectProject

POST

application/json
```

参数：

参数名    必选    类型    说明

username  yes    string

pid     yes    string

返回示例： 

```
{

  "ecode": "0",

 

}

 
```

## 2)单位

### 1.单位注册接口

```
/api/unit/register

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string   用户名

password  yes    string   密码

 

返回示例

```
{

  "ecode":"0"

}
```

### 2.单位登陆接口

```
/api/unit/register

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string   用户名

password  yes    string   密码

 

返回示例

```
{

  "ecode":"0"

}
```

### 3.创建具体项目信息

```
/api/unit/createProject

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string

name    yes    string

time    yes    string //2018.1.2

purpose   yes    string       

schedule  yes    string //2018.2.2-2019.2.21",

data    yes    ?//示例[{"1"},{"2"}]数字分别代表所需数据字段

 

返回示例：

 

```
{

  "ecode": "0",

}
```

 

### 4.修改具体项目信息

```
/api/unit/reviseProject

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string

pid     yes    int    项目id

name    yes    string   项目名称

time    yes    string //2018.1.2

purpose   yes    string       

schedule  yes    string //2018.2.2-2019.2.21",

data    yes    ?//示例[{"1"},{"2"}]数字分别代表所需数据字段

 

返回示例：

```
{

  "ecode": "0",

}
```

### 5.保存具体项目信息

```
/api/unit/saveProject

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string

name    no    string

time    no    string //2018.1.2

purpose   no    string       

schedule  no    string //2018.2.2-2019.2.21",

data    no    ?//示例[{"1"},{"2"}]数字分别代表所需数据字段

 

返回示例：

 

```
{

  "ecode": "0",

}
```

### 6.获取保存项目信息

```
/api/unit/getSavedProject

POST

application/json
```

参数：

参数名    必选    类型    说明

pid     yes    int    项目id

 

返回示例：

```
{

  "ecode": "0",

  "content": [

​    {

​      "pid": "1", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"，

​      "organization":"xxx单位",

​      "schedule":"2018.2.2-2019.2.21",

​      "data":[{"1"},{"2"}]//数字分别代表所需数据字段

​    },

  ]

}
```

### 7.获取单位项目（通过/未通过/审核中/草稿）

```
/api/unit/getUnitProject

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string

method   yes    string   pass/unpass/underreview/draft

number   yes    int    从第几条返回(一次返回十条)

 

返回示例：

 

```
{

  "ecode": "0",

  "content": [

​    {

​      "pid": "1", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    },

​    {

​      "pid": "2", // project ID

​      "name": "xxxx项目",

​      "time": "2018.1.2",

​      "hot":"1",

​      "purpose": "这是一个xxx项目"

​      

​    }...（共十条）

  ]

}
```

### 8.单位获取已经完成存同意

```
/api/unit/getCompletedAgreement

POST

application/json

参数：
```

参数名    必选  

organization yes                                        

username  yes

pid     yes //项目id

返回示例：

 

```
{

  "ecode": "0",

  "data":[{"dataId":"1","response":"yes"},{"dataId":"3","response":"no"}]  

  

}
```

 

### 9.1 找回密码(发验证码)

```
/api/unit/findPassword

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string   

返回示例

```java
{

  "ecode":"0"//发送了链接给邮箱

}
```

 

### 9.2 找回密码（修改密码）//使用邮箱链接

```
/api/unit/changePassword

POST

application/json
```

参数：

参数名    必选    类型    说明

organization  yes    string   

password  yes    string    密码

返回示例

```
{

  "ecode":"0"

}
```

## 3）调用微信小程序

```javascript
wx.request({
  url: 'test.php', //仅为示例，并非真实的接口地址
  data: {
     x: '' ,
     y: ''
  },
  header: {
    'content-type': 'application/json' // 默认值
  },
  success: function(res) {
    console.log(res.data)
  }
})
```













