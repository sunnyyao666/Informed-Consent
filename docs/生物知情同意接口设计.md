# 一、错误码

0	  请求完成

-1	  未知错误

1000	资源不存在（未找到URI对应的资源）

1001	请求参数校验失败

1002	所操作的数据不存在（一般是id错误）

1101	用户名重复

1102	用户名不存在

1103	密码错误

1200	没有权限

1300	上传文件格式错误

1301	上传文件内容错误

2000	未知数据库错误

# 二、权限

“authorities”: {“user”,"unit","admin"}

# 三、所需字段

1  指纹

2  面部

# 四、接口

## 1)、用户

### ***NEW* **用户注册获取短信验证码接口

- path: /api/user/code
- method: GET
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |

- response

返回示例

```json
{
    "statusCode": 0, 
    "statusMsg": "成功",
}

{
    "statusCode":1,
  	"errMsg": "已注册"
}

{
    "statusCode": 2, 
    "statusMsg": "其他失败",
}
```

### 

### 用户注册接口

- path: /api/user/register
- method: POST
- params: form-data

| 参数名          | 必选           | 类型              | 说明              |
| --------------- | -------------- | ----------------- | ----------------- |
| username        | yes            | string            | 手机号            |
| <u>**code**</u> | <u>**yes**</u> | <u>**string**</u> | <u>**验证码**</u> |
| password        | yes            | string            | 密码              |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}


{
    "statusCode": 1, 
    "statusMsg": "已注册",
}

{
    "statusCode": 2, 
    "statusMsg": "其他失败",
}
```

### 用户登陆接口

- path: /api/user/userLogin
- method: POST
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| password | yes  | string | 密码   |

- response

返回示例

```json
{
    "statusCode": 0, 
    "statusMsg": "成功"
}


{
    "statusCode": 1, 
    "statusMsg": "用户名或密码不正确",
}

```



### 设置手势密码

- path: /api/user/signature
- method: POST
- params: form-data

| 参数名      | 必选    | 类型      | 说明         |
| ----------- | ------- | --------- | ------------ |
| username    | yes     | string    | 手机号       |
| password    | yes     | string    | 密码         |
| **gesture** | **yes** | **a**rray | **手势密码** |

- response

返回示例

```json
{
    "statusCode": 0, 
    "statusMsg": "成功"
}
```



### NEW是否有手势密码

- path: /api/user/hasSignature
- method: GET
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| password | yes  | string | 密码   |
|          | **** |        |        |

- response

返回示例

```json
{
    "data":{
        "hasSignature":true
    },
    "statusCode": 0, 
    "statusMsg": "成功"
}

{
    "data":{
        "hasSignature":false
    },
    "statusCode": 0, 
    "statusMsg": "成功"
}
```



### *New*验证手势密码

- path: /api/user/uncheckedSignature
- method: POST
- params: form-data

| 参数名   | 必选 | 类型   | 说明     |
| -------- | ---- | ------ | -------- |
| username | yes  | string | 手机号   |
| password | yes  | string | 密码     |
| gesture  | yes  | array  | 手势密码 |

- response

返回示例

```json
{
    "data":{
        "gesture":[1,5,9,8]
    },
    "statusCode": 0, 
    "statusMsg": "成功"
}
```



### 找回手势密码（发验证码）

- path: /api/user/signatureCode
- method: GET
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| password | yes  | string | 密码   |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
//发送了验证码给手机
```



### 找回手势密码（修改密码）

- path: /api/user/signature
- method: PUT
- params: form-data

| 参数名    | 必选 | 类型   | 说明               |
| --------- | ---- | ------ | ------------------ |
| username  | yes  | string | 手机号             |
| password  | yes  | string | 密码               |
| code      | yes  | string | 短信验证码         |
| signature | yes  | string | 手势对应的数字序列 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



### 提交同意

- path: /api/user/agreement
- method: POST
- params: form-data

| 参数名    | 必选 | 类型   | 说明               |
| --------- | ---- | ------ | ------------------ |
| data      | yes  | array  | 数据               |
| username  | yes  | string | 手机号             |
| pid       | yes  | string | 项目id             |
| signature | yes  | string | 手势对应的数字序列 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



### 获取已经完成的同意

- path: /api/user/completedAgreements
- method: GET
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| pid      | yes  | string | 项目id |

- response

返回示例

 ```json
{	
    "status_code": 0,
 	"status_msg": "成功", 
    "data":[{"dataId":"1","response":"yes"},
            {"dataId":"3","response":"no"}]
}
 ```



### 修改同意(<!--参数问题-->)

- path: /api/user/agreement
- method: PUT
- params: form-data

| 参数名    | 必选 | 类型   | 说明               |
| --------- | ---- | ------ | ------------------ |
| data      | yes  | array  | 手机号             |
| username  | yes  | string | 密码               |
| pid       | yes  | string | 项目id             |
| signature | yes  | string | 手势对应的数字序列 |

- response

返回示例

```json
{	
    "status_code": 0,
 	"status_msg": "成功"
}
```



### 核对手势密码<!--参数问题-->

- path: /api/user/signature
- method: POST
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| password | yes  | string | 密码   |

-  response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```

 

### 获取用户收藏或完成的所有项目

- path: /api/user/userProjects
- method: GET
- params: form-data

| 参数名   | 必选 | 类型   | 说明                                      |
| -------- | ---- | ------ | ----------------------------------------- |
| method   | yes  | string | collected/completed/saved(收藏/完成/保存) |
| username | yes  | string | 手机号                                    |
| offset   | yes  | int    | 从第几条返回(一次返回十条)                |
| sum      | yes  | int    | 返回几条                                  |

- response

返回示例

```json
{
    "status_code": 0,
    "status_msg": "成功", 
    "content": [
​    {
​      "pid": "1", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    },
​    {
​      "pid": "2", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    }...（共十条）
  ]
}
```

 

### 用户收藏项目

- path: /api/user/collectedProject
- method: POST
- params: form-data

| 参数名   | 必选 | 类型   | 说明   |
| -------- | ---- | ------ | ------ |
| username | yes  | string | 手机号 |
| pid      | yes  | string | 项目id |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



## 2)单位

### 单位注册接口

- path: /api/unit/register
- method: POST
- params: form-data

| 参数名       | 必选 | 类型   | 说明   |
| ------------ | ---- | ------ | ------ |
| organization | yes  | string | 单位名 |
| password     | yes  | string | 密码   |

- response

返回示例

 ```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
 ```



### 单位登陆接口

- path: /api/unit/companyLogin
- method: POST
- params: form-data

| 参数名       | 必选 | 类型   | 说明   |
| ------------ | ---- | ------ | ------ |
| organization | yes  | string | 单位名 |
| password     | yes  | string | 密码   |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



### 创建具体项目信息

- path: /api/unit/project
- method: POST
- params: form-data

| 参数名       | 必选 | 类型   | 说明                                        |
| ------------ | ---- | ------ | ------------------------------------------- |
| organization | yes  | string | 单位名                                      |
| name         | yes  | string | 名字                                        |
| time         | yes  | string | //2018.1.2                                  |
| purpose      | yes  | string |                                             |
| schedule     | yes  | string | //2018.2.2-2019.2.21                        |
| data         | yes  | array  | //示例[{"1"},{"2"}]数字分别代表所需数据字段 |

- response

返回示例：

 ```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
 ```

 

### 修改具体项目信息

- path: /api/unit/project
- method: PUT
- params: form-data

| 参数名       | 必选 | 类型   | 说明                                        |
| ------------ | ---- | ------ | ------------------------------------------- |
| organization | yes  | string | 用户名                                      |
| pid          | yes  | string | 项目id                                      |
| name         | yes  | string | 项目名称                                    |
| time         | yes  | string | //2018.1.2                                  |
| purpose      | yes  | string |                                             |
| schedule     | yes  | string | //2018.2.2-2019.2.21                        |
| data         | yes  | array  | //示例[{"1"},{"2"}]数字分别代表所需数据字段 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



### 保存具体项目信息

- path: /api/unit/savedProject
- method: POST
- params: form-data

| 参数名       | 必选 | 类型   | 说明                                        |
| ------------ | ---- | ------ | ------------------------------------------- |
| organization | yes  | string | 用户名                                      |
| name         | no   | string | 项目名称                                    |
| time         | no   | string | //2018.1.2                                  |
| purpose      | no   | string |                                             |
| schedule     | no   | string | //2018.2.2-2019.2.21                        |
| data         | no   | array  | //示例[{"1"},{"2"}]数字分别代表所需数据字段 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



### 获取保存项目信息

- path: /api/unit/savedProject
- method: GET
- params: form-data

| 参数名 | 必选 | 类型 | 说明   |
| ------ | ---- | ---- | ------ |
| pid    | yes  | int  | 项目id |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功",
    "content":[
​    {
​      "pid": "1", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"，
​      "organization":"xxx单位",
​      "schedule":"2018.2.2-2019.2.21",
​      "data":[{"1"},{"2"}]//数字分别代表所需数据字段
​    },
  ]}
```



### 获取单位项目（通过/未通过/审核中/草稿）

- path: /api/unit/projects
- method: GET
- params: form-data

| 参数名       | 必选 | 类型   | 说明                          |
| ------------ | ---- | ------ | ----------------------------- |
| organization | yes  | string | 单位名                        |
| method       | yes  | string | pass/unpass/underreview/draft |
| number       | yes  | int    | 从第几条返回(一次返回十条)    |

- response

返回示例

 ```json
{"status_code": 0, "status_msg": "成功", "content": [
​    {
​      "pid": "1", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    },
​    {
​      "pid": "2", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    }...（共十条）
  ]
}
 ```



### 单位获取已经完成的同意

- path: /api/unit/completedAgreements
- method: GET
- params: form-data

| 参数名       | 必选 | 类型   | 说明                          |
| ------------ | ---- | ------ | ----------------------------- |
| organization | yes  | string | 单位名                        |
| method       | yes  | string | pass/unpass/underreview/draft |
| number       | yes  | int    | 从第几条返回(一次返回十条)    |

- response

返回示例：

 ```json
{
    "status_code": 0, 
    "status_msg": "成功", 
    "data":[{"dataId":"1","response":"yes"},
            {"dataId":"3","response":"no"}]
}
 ```

 

### 找回密码(发验证码)

- path: /api/unit/passwordCode
- method: GET
- params: form-data

| 参数名       | 必选 | 类型   | 说明   |
| ------------ | ---- | ------ | ------ |
| organization | yes  | string | 单位名 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
//发送验证码给单位
```

 

### 找回密码（修改密码）//使用邮箱链接

- path: /api/unit/password
- method: POST
- params: form-data

| 参数名       | 必选 | 类型   | 说明                          |
| ------------ | ---- | ------ | ----------------------------- |
| organization | yes  | string | 单位名                        |
| method       | yes  | string | pass/unpass/underreview/draft |
| number       | yes  | int    | 从第几条返回(一次返回十条)    |
| newPassword  | yes  | string | 新密码                        |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功"
}
```



## 3）用户和单位

### 获取所有项目

- path: /api/allProjects
- method: GET
- params: form-data

| 参数名 | 必选 | 类型   | 说明                       |
| ------ | ---- | ------ | -------------------------- |
| method | yes  | string | hot/time(按时间还是热度)   |
| offset | yes  | int    | 从第几条返回(一次返回十条) |
| sum    | yes  | int    | 总共返回量                 |

- response

返回示例

```json
{
    "status_code": 0, 
    "status_msg": "成功", 
    "content": [
​    {
​      "pid": "1", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    },
​    {
​      "pid": "2", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"
​    }...（共十条）
  ]
}
```



### 获取具体项目信息

- path: /api/projectDetails
- method: GET
- params: form-data

| 参数名 | 必选 | 类型   | 说明   |
| ------ | ---- | ------ | ------ |
| pid    | yes  | string | 项目id |

- response

返回示例

 ```json
{
    "status_code": 0, 
    "status_msg": "成功", 
    "content": [
​    {
​      "pid": "1", // project ID
​      "name": "xxxx项目",
​      "time": "2018.1.2",
​      "hot":"1",
​      "purpose": "这是一个xxx项目"，
​      "organization":"xxx单位",
​      "schedule":"2018.2.2-2019.2.21",
​      "data":[{"1"},{"2"}]//数字分别代表所需数据字段
​    },
  ]
}
 ```

 

## 4）调用微信小程序

```javascript
wx.request({
  url: 'test.php', //仅为示例，并非真实的接口地址
  data: {
     x: '' ,
     y: ''
  },
  header: {
    'content-type': 'application/json' // 默认值
  },
  success: function(res) {
    console.log(res.data)
  }
})
```


